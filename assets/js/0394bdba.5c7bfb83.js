"use strict";(self.webpackChunkespresso=self.webpackChunkespresso||[]).push([["6381"],{2522:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>i,toc:()=>c,default:()=>p,metadata:()=>a,assets:()=>r,contentTitle:()=>o});var a=JSON.parse('{"id":"setup/install","title":"Quantum Espresso installation","description":"We can install Quantum Espresso on our personal laptops or desktops to run","source":"@site/docs/setup/install.md","sourceDirName":"setup","slug":"/setup/install","permalink":"/espresso/setup/install","draft":false,"unlisted":false,"editUrl":"https://github.com/pranabdas/espresso/blob/main/docs/setup/install.md","tags":[],"version":"current","frontMatter":{"title":"Quantum Espresso installation","sidebar_label":"Installation","keywords":["Quantum Espresso installation","Installing Quantum Espresso","PWTK"]},"sidebar":"docs","previous":{"title":"Setup","permalink":"/espresso/category/setup"},"next":{"title":"High Performance Computing","permalink":"/espresso/setup/hpc"}}'),t=s(5893),l=s(65);let i={title:"Quantum Espresso installation",sidebar_label:"Installation",keywords:["Quantum Espresso installation","Installing Quantum Espresso","PWTK"]},o=void 0,r={},c=[{value:"Installing PWTK",id:"installing-pwtk",level:2}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,l.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"We can install Quantum Espresso on our personal laptops or desktops to run\nrelatively less computationally intensive calculations. If we intend to perform\ncomputationally heavy tasks, we would need access to better computing resources\nwith large number of CPU (or GPU) cores, memory, bandwidth, and disc IO."}),"\n",(0,t.jsx)(n.p,{children:"Throughout this tutorial, I will be using a Ubuntu system for smaller\ncalculations while other computationally intensive calculations will be done in\nHPC clusters."}),"\n",(0,t.jsx)(n.p,{children:"Perhaps the easiest way to install Quantum Espresso is from the package manager\nof respective Linux distribution. This should work fine for us and this is\nrecommended option. Following commands are for Ubuntu/Debian. First make sure\nyour system is up-to-date."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt update && sudo apt upgrade\n"})}),"\n",(0,t.jsx)(n.p,{children:"Install Quantum Espresso from apt repository:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt install --no-install-recommends \\\n    libfftw3-dev \\\n    quantum-espresso\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["Pre-built binaries of Quantum ESPRESSO for Ubuntu is included in my GitHub\nrepository ",(0,t.jsx)(n.a,{href:"https://github.com/pranabdas/espresso/releases",children:"releases"})," for easy\ninstallation. Please refer to the release notes for more details on how to\ninstall."]})}),"\n",(0,t.jsx)(n.p,{children:"If you want to compile from the source yourself, here are the installation steps\nfor the Quantum Espresso version 7.2 in a Ubuntu (LTS 22.04) system. I will be\ncompiling for single processor. First install the recommended libraries and\ndependencies:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt install --no-install-recommends \\\n    autoconf \\\n    build-essential \\\n    ca-certificates \\\n    gfortran \\\n    libblas3 \\\n    libc6 \\\n    libfftw3-dev \\\n    libgcc-s1 \\\n    liblapack-dev \\\n    wget\n"})}),"\n",(0,t.jsx)(n.p,{children:"If you want to compile for parallel processing, you also need to install:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt install --no-install-recommends \\\n    libopenmpi-dev \\\n    libscalapack-openmpi-dev \\\n    libelpa17  #  use libelpa4 on Ubuntu 20.04\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://gitlab.com/QEF/q-e/-/releases",children:"Download"})," Quantum Espresso (latest\nversion 7.2 at the time of writing):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"wget https://gitlab.com/QEF/q-e/-/archive/qe-7.2/q-e-qe-7.2.tar.gz\n"})}),"\n",(0,t.jsx)(n.p,{children:"Un-tar the source files:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"tar -zxvf q-e-qe-7.2.tar.gz\n"})}),"\n",(0,t.jsx)(n.p,{children:"Go to the qe directory and issue configure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd q-e-qe-7.2\n./configure\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Here we can provide various configuration options. Read the manual in oder to\nproperly understand. But in most cases we will be just fine with the defaults,\nit should detect the system configuration automatically, in case you don't get\nwhat you want, try the various configuration ",(0,t.jsx)(n.code,{children:"flags"})," with configure."]}),"\n",(0,t.jsx)(n.admonition,{type:"caution",children:(0,t.jsxs)(n.p,{children:["Note that certain programs/utilities bundled with Quantum Espresso might not\nwork correctly in parallel compilation, so we may need serial compilation for\nthose by ",(0,t.jsx)(n.code,{children:"./configure --disable-parallel"})," option in case parallel option is\nautomatically detected."]})}),"\n",(0,t.jsx)(n.p,{children:"Finally, compile the source files and create the binary executables:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# compile individual packages\nmake pw\n# or compile everything\nmake all\n# we can parallelize e.g., below command uses 4 CPUs\nmake -j4 all\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Now, the binary files or their symbolic links (shortcuts) would be placed in the\n",(0,t.jsx)(n.code,{children:"bin"})," directory. It would be good idea to include the executable path to your\n",(0,t.jsx)(n.code,{children:".bashrc"})," (or ",(0,t.jsx)(n.code,{children:".zshrc"})," or whatever shell you use) file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# use the correct path if it differs from mine\necho 'export PATH=\"/root/q-e-qe-7.2/bin:$PATH\"' >> ~/.bashrc\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Finally, you may need to restart your terminal or ",(0,t.jsx)(n.code,{children:"source .bashrc"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"source ~/.bashrc\n"})}),"\n",(0,t.jsx)(n.p,{children:"You can compile the documentation by going to particular directory (e.g., PW or\nPP) and execute (you need to have LaTeX installed in your system):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"make doc\n"})}),"\n",(0,t.jsxs)(n.p,{children:["If you want docs in PDF format, you can use ",(0,t.jsx)(n.code,{children:"latex"})," commands to create them as\nwell:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pdflatex filename.tex\n"})}),"\n",(0,t.jsxs)(n.p,{children:["We are now ready to run Quantum Espresso ",(0,t.jsx)(n.code,{children:"pw.x"})," (or any other program) using\n",(0,t.jsx)(n.code,{children:"mpirun"})," by following command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pw.x -inp inputfile > outputfile\n# For parallel version\nmpirun -np 12 pw.x -inp inputfile > outputfile\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Where ",(0,t.jsx)(n.code,{children:"-np 12"})," specifies the number of processors. ",(0,t.jsx)(n.code,{children:"-inp"})," stands for input file.\nAlternatively, we can use ",(0,t.jsx)(n.code,{children:"-i"}),", or ",(0,t.jsx)(n.code,{children:"-in"}),", or ",(0,t.jsx)(n.code,{children:"-input"}),", or even standard input\nredirect ",(0,t.jsx)(n.code,{children:"<"}),". But beware some systems may not interpret all the different\noptions, I think safe option is to use ",(0,t.jsx)(n.code,{children:"-i"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Once installation is completed, optionally we can run tests if everything went\nOK. Go to the ",(0,t.jsx)(n.code,{children:"test-suite"})," directory and run"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"make run-tests\n"})}),"\n",(0,t.jsxs)(n.p,{children:["If all is well, we will see ",(0,t.jsx)(n.strong,{children:"Passed"})," messages and we are good to go."]}),"\n",(0,t.jsx)(n.admonition,{type:"caution",children:(0,t.jsx)(n.p,{children:"Note that the above installation steps may not be the most optimal way to run\nQuantum Espresso in your computer. There are multiple implementations of same\nlibrary. For example, you can replace openmpi libraries with Intel MKL or MPICH\nimplementations. Please do research yourself or ask help from someone who has\nknowledge about high performance computing."})}),"\n",(0,t.jsx)(n.h2,{id:"installing-pwtk",children:"Installing PWTK"}),"\n",(0,t.jsx)(n.p,{children:"We will install a very hand scripting package PWscf Toolkit (PWTK). First we\nneed to install following dependencies:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt install tcl tcllib\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Download the file from - ",(0,t.jsx)(n.a,{href:"http://pwtk.ijs.si/download/pwtk-2.0.tar.gz",children:"http://pwtk.ijs.si/download/pwtk-2.0.tar.gz"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'wget "http://pwtk.ijs.si/download/pwtk-2.0.tar.gz"\n'})}),"\n",(0,t.jsx)(n.p,{children:"Above command will download and save the file to your current directory. Next we\nneed to just un-tar (no need to compile):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"tar -zxvf pwtk-2.0.tar.gz\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Add the path (modify below as appropriate) to ",(0,t.jsx)(n.code,{children:".bashrc"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"echo 'export PATH=\"/root/pwtk-2.0:$PATH\"' >> ~/.bashrc\nsource ~/.bashrc\n"})})]})}function p(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);